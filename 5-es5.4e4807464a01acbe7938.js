function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,n,t){return n&&_defineProperties(e.prototype,n),t&&_defineProperties(e,t),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{UFnY:function(e,n,t){"use strict";t.r(n);var a,o=t("ofXK"),i=t("tyNb"),r=t("smFM"),c=t("eSV8"),s=t("tk/3"),l=t("fXoL"),u=((a=function(){function e(n,t){_classCallCheck(this,e),this.http=n,this.authService=t,this.headers=new Headers}return _createClass(e,[{key:"getInfoUser",value:function(){var e={headers:new s.c({"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token"),"X-Platform":"WEB"})};return this.http.post("http://localhost:8080/identity/authentication",null,e)}}]),e}()).\u0275fac=function(e){return new(e||a)(l.Yb(s.a),l.Yb(r.a))},a.\u0275prov=l.Kb({token:a,factory:a.\u0275fac,providedIn:"root"}),a),d=t("XiUz"),b=t("MSSf"),f=t("IRfi"),h=t("A2Vd"),g=t("Xlwt"),p=t("3Pt+");function m(e,n){if(1&e){var t=l.Vb();l.Ub(0,"div",1),l.Ub(1,"div",2),l.Ub(2,"mat-card",3),l.Ub(3,"div",4),l.Ub(4,"mat-card-header",5),l.Ub(5,"mat-card-title",6),l.Fc(6,"Clinic App"),l.Tb(),l.Tb(),l.Tb(),l.Ub(7,"mat-card-content",7),l.Ub(8,"div"),l.Ub(9,"form"),l.Ub(10,"div"),l.Ub(11,"mat-form-field",8),l.Ub(12,"mat-label"),l.Fc(13,"Usuario"),l.Tb(),l.Ub(14,"input",9),l.cc("ngModelChange",(function(e){return l.xc(t),l.gc().userName=e})),l.Tb(),l.Tb(),l.Tb(),l.Ub(15,"div"),l.Ub(16,"mat-form-field",8),l.Ub(17,"mat-label"),l.Fc(18,"Contrase\xf1a"),l.Tb(),l.Ub(19,"input",10),l.cc("ngModelChange",(function(e){return l.xc(t),l.gc().password=e})),l.Tb(),l.Tb(),l.Tb(),l.Ub(20,"div"),l.Ub(21,"button",11),l.cc("click",(function(e){return l.xc(t),l.gc().login()})),l.Fc(22," Iniciar Sesi\xf3n "),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb()}if(2&e){var a=l.gc();l.Cb(14),l.oc("ngModel",a.userName),l.Cb(5),l.oc("ngModel",a.password)}}var v,w,y=[{path:"",redirectTo:"/login",pathMatch:"full"},{path:"login",component:(v=function(){function e(n,t,a){_classCallCheck(this,e),this._loginService=n,this._authService=t,this.router=a,this.isLoggedIn=!1,this.isLoginFailed=!1}return _createClass(e,[{key:"ngOnInit",value:function(){console.log(this._loginService.getToken()),this._loginService.getToken()&&(this.isLoggedIn=!0,this.router.navigateByUrl("/system/branch"))}},{key:"storeFirebaseLoginInfo",value:function(e){this._loginService.saveToken(e),this.validateUser()}},{key:"login",value:function(){var e=this;this._loginService.login(this.userName,this.password).then((function(n){e._loginService.saveUser(n.user.email),n.user.getIdToken().then((function(n){e.storeFirebaseLoginInfo(n)})),e.toDashBoard()})).catch((function(n){if(n.code){e.isLoginFailed=!0;var t="";switch(n.code){case"auth/wrong-password":t="La contrase\xf1a es incorrecta o el usuario a\xfan no cuenta con una contrase\xf1a";break;case"auth/invalid-email":t="La direcci\xf3n de correo no cumple con el formato";break;case"auth/user-not-found":t="No existe un usuario asociado a esta cuenta de correo";break;default:t="Ocurri\xf3 un error inesperado. Contacte con el administrador"}c.a.showError(t)}else c.a.showError("Ocurri\xf3 un error inesperado. Contacte con el administrador")}))}},{key:"toDashBoard",value:function(){this.router.navigateByUrl("/system/branch")}},{key:"validateUser",value:function(){var e=this;this._authService.getInfoUser().subscribe((function(n){console.log("data: ",n),e.isLoginFailed=!1,e.isLoggedIn=!0}))}}]),e}(),v.\u0275fac=function(e){return new(e||v)(l.Ob(r.a),l.Ob(u),l.Ob(i.e))},v.\u0275cmp=l.Ib({type:v,selectors:[["app-login"]],features:[l.Bb([r.a])],decls:1,vars:1,consts:[["class","example-login",4,"ngIf"],[1,"example-login"],["fxLayout","row","fxLayoutAlign","center center",1,"login-wrapper"],[1,"box"],[1,"mat-card-header-text"],[1,"mat-card-header-display"],[1,"mat-card-title"],[1,"mat-card-content-login"],[1,"full-width"],["id","userName","name","userName","matInput","","required","",3,"ngModel","ngModelChange"],["id","password","name","password","matInput","","type","password","required","",3,"ngModel","ngModelChange"],["mat-raised-button","","color","primary","value","Iniciar Sesi\xf3n",1,"btn-block-login",3,"click"]],template:function(e,n){1&e&&l.Dc(0,m,23,2,"div",0),2&e&&l.oc("ngIf",!n.isLoggedIn)},directives:[o.k,d.c,d.b,b.a,b.c,b.f,b.b,p.t,p.n,p.o,f.b,f.e,h.b,p.b,p.r,p.m,p.p,g.a],styles:[""]}),v)}],U=((w=function e(){_classCallCheck(this,e)}).\u0275mod=l.Mb({type:w}),w.\u0275inj=l.Lb({factory:function(e){return new(e||w)},imports:[[i.i.forChild(y)],i.i]}),w);t.d(n,"PublicModule",(function(){return C}));var k,C=((k=function e(){_classCallCheck(this,e)}).\u0275mod=l.Mb({type:k}),k.\u0275inj=l.Lb({factory:function(e){return new(e||k)},imports:[[o.c,U]]}),k)}}]);